<!DOCTYPE html>
<html lang="de-DE">

  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://kit.fontawesome.com/6ea270afe6.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="../style/style.css">
    <title>Verhaltensexperimente</title>
  </head>

  <body>

    <!-- Mobile Navigation Menu -->
    <nav class="mobileNav mobileOff">
        <nav id="mobNavBar">
            <div id="mobNavLeft">
                <a href="javascript:void(0);">
                    <i class="fa-solid fa-user"></i>
                </a>
            </div>
            <div id="titleBox">
                <a href="/" id="title">DBT-Hub</a>
            </div>
            <div id="mobNavRight">
                <a href="javascript:void(0);" id="bars" onclick="navMenuOpen()">
                    <i class="fa-solid fa-bars"></i>
                </a>
                <a href="javascript:void(0);" id="xMark" onclick="navMenuOpen()">
                    <i class="fa-solid fa-xmark fa-lg"></i>
                </a>
            </div>
        </nav>
        <nav id="mobNavDropdown">
            <div><a href="/vexperiment">VExperiment</a></div>
            <div><a href="/gefuehl-aha" target="_parent">Gefühl-AHA</a></div>
        </nav>
    </nav>

    <!-- Desktop Navigation Menu -->
    <nav class="desktopNav desktopON">
        <div id="deskNavLeft">
            <a href="/vexperiment">VExperiment</a>
        </div>
            <div id="titleBox">
            <a id="title" href="/">DBT-Hub</a>
        </div>
        <div id="deskNavRight">
            <a href="/gefuehl-aha" target="_parent">Gefühl-AHA</a>
            <a href="javascript:void(0);" class="icon">
                <i class="fa-solid fa-user"></i></a>
        </div>
    </nav>

    <!-- Top Navigation Gap -->
    <div style="padding: 40px;"></div>

    <!-- Site Content -->
    <h1>Verhaltensexperimente</h1>
    <main class="content">
      <section class="vex-all">
        <ul class="vex-all-list">
          {{#if errMsg}}
          <li class="item" id="err-msg">{{errMsg}}</li>
          {{/if}}
          {{#each vexperiments}}
          <li class="vex" id="{{this._id}}">
            <div class="vex-name">{{this.name}}</div>
            <div class="vex-situation">{{this.situation}}</div>
          </li>
          {{/each}}
        </ul>
      </section>
    </main>

    {{!-- {{#if (new URLSearchParams(window.location.search).get('neues-vex'))}} --}}
    <section class="vex-new">
      <h2 class="vex-new-headline">Neues Verhaltensexperiment</h2>
      <form action="/v/" method="post" class="vex-new-form">
        <div class="vex-new-form-field">
          <label for="vexName">Name</label>
          <input type="text" name="vexName" id="vexName">
        </div>
        <div class="vex-new-form-field">
          <input type="submit" value="Erstellen">
        </div>
      </form>
    </section>
    {{!-- {{/if}} --}}
    
    <section class="vex-new-button">
      <div onclick="toggleVexCreation()">+</div>
    </section>
    <script>
      const toggleVexCreation = () => {
        const searchParams = new URLSearchParams(window.location.search)
        if(searchParams.get('neues-vex')) searchParams.delete('neues-vex')
        else searchParams.set('neues-vex', '1')
      }
    </script>


  </body>

  <script src="../style/style.js"></script>

</html>